pico-8 cartridge // http://www.pico-8.com
version 42
__lua__

-- game loop 

function _init()
	map_setup()
	make_player()
    
end

function _update()
  move_player()
end

function _draw()
	cls()
	draw_map()
	draw_player()
end
-->8
-- map code 

function map_setup()
 	
 	-- map tile flags
 	wall=0
 	key=1
 	door=2
 	anim1=3
 	anim2=4
 	lose=6
 	win=7

end

function draw_map()
		mapx=flr(p.x/16)*16
		mapy=flr(p.y/16)*16
		camera(mapx*8,mapy*8)
 	map(0,0,0,0,128,64)

end

function is_tile(tile_type,x,y)

	-- get the tile 
	tile=mget(x,y)
	
	-- gets the flag of the tile
	has_flag=fget(tile,tile_type)

	-- if tile has a flag then true
	return has_flag
	
end

function can_move(x,y)

	-- (not) flips the actual resp
	return not is_tile(wall,x,y)
	
	
end


function swap_tile(x,y)
	tile=mget(x,y)
	
	-- swaps the tile for the next
	mset(x,y,tile+1)
end

function get_key(x,y)

	-- adds 1 key to inventory
 p.keys+=1
 
 swap_tile(x,y)
	sfx(1)
end
-->8
-- player code 

function make_player()
 p={}
 p.x=3
 p.y=5 
 p.sprite=1
 p.keys=0
end

function draw_player()
	spr(p.sprite,p.x*8,p.y*8)
end

function move_player()

	 newx=p.x
	 newy=p.y
	 
	 if (btnp(⬅️)) newx-=1
	 if (btnp(➡️)) newx+=1
	 if (btnp(⬆️)) newy-=1
		if (btnp(⬇️)) newy+=1
		
		interact(newx,newy)
		
		if (can_move(newx,newy)) then
			-- stops player from leaving map
			p.x=mid(0,newx,127)
			p.y=mid(0,newy,63)
			
			-- sound effect when can't move
		else
			sfx(0)
			
		end
		
end

function interact(x,y)
	
	-- checks if tile is key
	if(is_tile(key,x,y)) then
	
		get_key(x,y)
	end
	
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000004440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000004440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000011111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000041114000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000001110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000c0c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000008080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
33333333333333333333333300000000333333333333333300000000000000000000000000000000000000000000000000000000000000000000000000000000
33333333333333333311113300000000999333333333333300000000000000000000000000000000000000000000000000000000000000000000000000000000
3333333333333bb331666613000000009a9999993333333300000000000000000000000000000000000000000000000000000000000000000000000000000000
3333333333333b331666661300000000939aa9a93333333300000000000000000000000000000000000000000000000000000000000000000000000000000000
3333333333bb3b33126666610000000099933a3a3333333300000000000000000000000000000000000000000000000000000000000000000000000000000000
33333333333b33331266666100000000aaa333333333333300000000000000000000000000000000000000000000000000000000000000000000000000000000
33333333333b33333122661300000000333333333333333300000000000000000000000000000000000000000000000000000000000000000000000000000000
33333333333333330011113300000000333333333333333300000000000000000000000000000000000000000000000000000000000000000000000000000000
1111111111cc111111111111000000004a4444a44a4444a400000000000000000000000000000000000000000000000000000000000000000000000000000000
111111111111111111111111000000004a4444a44544445400000000000000000000000000000000000000000000000000000000000000000000000000000000
111111111111111111666611000000004a4444a41119911100000000000000000000000000000000000000000000000000000000000000000000000000000000
111111111111111116666611000000004a4444a41111111100000000000000000000000000000000000000000000000000000000000000000000000000000000
1111111111cc1cc1c266666c00000000aaa99aaa1111111100000000000000000000000000000000000000000000000000000000000000000000000000000000
1111111111111111c266666c00000000191991911511115100000000000000000000000000000000000000000000000000000000000000000000000000000000
11111111111111111c2266c1000000004a4444a44a4444a400000000000000000000000000000000000000000000000000000000000000000000000000000000
111111111111111111cccc11000000004a4444a44a4444a400000000000000000000000000000000000000000000000000000000000000000000000000000000
66666666666666666656666500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666666666665565555555500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666666665566666566566600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666666665666665555555500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666666666665666666656600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666666666656665555555500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666666665666666666666600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666666665666665655555500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000000000000000000000000000000000100020000000000000000000000010101000301000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
1010101010101010101010101010202020101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101014111010111010101010202022101010111011101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010121010101210101010101010202022101010101010101010101110101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010111010101210202020101010101010121010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101110101024101010101020202120101010111010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1012101010101010101010101020202010101010121210101010101210101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010303010101020212120201010101010121010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2010101010303120202020212020101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2220202020313020212220201010101010101010101010111010101110101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202122303020202010101010121010101010101210101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202020313010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2010101010303010101010101010101010101010101010111010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2010101010313130101032323232101010101210101010101010121010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010103031303132303032101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101030303130303032101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010111010111010101032323232101010101111101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000400000c0500c050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000300001075000720207202073000750000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
