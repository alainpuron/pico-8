pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
	function _init()
		plr_init()
		fish_placement() -- initial fish placement
		ymove_init()
	end

	function _update()
	
		plr_update()
		dcam()
		fish_pickup()
		anmove_update()
		fishspawn_update(fish_count,fish_spawn)
	end

	function _draw()
		cls()
		map()
		plr_draw()
		draw_fish()
		fish_respawn_draw()
	end
-->8
-- player --
function plr_init()
 plr={
 x=63, -- x loc
 y=63, -- y loc
 sprite=0,
 fx=false,
 fy=false}
 

end

function plr_update()

	if btn(➡️) then -- right move
		plr.x+=1
		plr.sprite=0 -- spr number
		plr.fx=false -- x axis rot
		plr.fy=false
	end
	
	if btn(⬅️) then -- left move
		plr.x-=1
		plr.sprite=0
		plr.fx=true
		plr.fy=false

	end
	
	if btn(⬆️) then -- down
		plr.y-=1
		plr.sprite=32
		plr.fy=false -- y axis rot

	end
	
	if btn(⬇️) then -- up
		plr.y+=1
		plr.sprite=32
		plr.fy=true

	end
	
	
	-- up and right 
	if btn(⬆️) and btn(➡️) then
		plr.sprite=41
		plr.fy=false
		plr.fx=false

	end
	
	-- up and left
	if btn(⬆️) and btn(⬅️) then
		plr.sprite=41
		plr.fy=false
		plr.fx=true
	end
	
	-- down and right
	if btn(⬇️) and btn(➡️) then
		plr.sprite=41
		plr.fy=true
		plr.fx=false

	end
	
	-- down and left
	if btn(⬇️) and btn(⬅️) then
		plr.sprite=41
		plr.fy=true
		plr.fx=true

	end

end


function plr_draw()

-- spr,x,y,w,h,fx,fy
spr(plr.sprite,plr.x,plr.y,2,2,plr.fx,plr.fy)

end
-->8
-- fish placement and pick --
 
fish_list={} -- stores the fish
fish_count=0 -- fish collected
function fish_placement()

				local fish_limit=5 -- limit
				local spawned_fish=0 -- count

				while spawned_fish < fish_limit
				 do
								for x=0,20 do
								
									for y=0,20 do
									
										if rnd(15)<.1 and spawned_fish < fish_limit 
										 then
										 -- add a fish to the list
											add(fish_list,{
											
											x = x * 8, -- convert grid to pixel
											y = y * 8,
											sp = rnd({7,8,9}), -- sprite index
											act = true
											
											})	
											spawned_fish+=1
										
										end
										
									end		
								end

						end

end

function fish_pickup()

-- for every fish in fish list
	for fish in all(fish_list) do
	
		-- if fish can still be picked
		if fish.act -- (true)
		then
		-- player is 8 or less pixels away
			if abs(plr.x - fish.x) <= 8 and abs(plr.y - fish.y) <= 8 then
				fish.act = false
				fish_count += 1 -- add to count
				 
			end
		end
		
	end
	
end


function draw_fish()
	print(fish_count,cx+10,cy+10,7)

	-- for all fish in fish list
	for fish in all(fish_list)
	 do
	 -- if it can be picked
				if fish.act then 
		-- draw fish
					spr(fish.sp,fish.x,fish.y)
			end
	
	end			
		
		
end
-->8
-- camera --
function dcam()

	cx=plr.x+8-63
	cy=plr.y+8-63
	camera(cx,cy)

end


-->8
-- movement animation --
function ymove_init() -- y 
--	y_sprite=32
	
	spr_timer = 0
	f_frame = 32 -- first frame
	l_frame = 38 -- last frame
	animation_speed = 10

end

-- animation movement 
function anmove_update()
	
	if btn(⬆️) then 
		
	
		if spr_timer < animation_speed then 
			spr_timer+=1
			else
				if plr.sprite < l_frame 
					then
						plr.sprite +=2
				else
					plr.sprite = f_frame
					end
			 spr_timer = 0
			end
			
		
	end -- if
	
end -- fuc
-->8
-- spawn fish after --


function fishspawn_update(fc,sf)
		
-- spawn new fish after 
-- original amount dissa[ears 

 if fc == sf
	then
	fc=0
	fish_placement()
	
 end	
end

function fish_respawn_draw()
	draw_fish()
end
__gfx__
00000000000000000000000000000000000000000000000000000000000660000002200000011000000000000033333333333333cccccccccccccccc00000000
00000000000000000000000000000000000000000000000000000000d0111600e0999a0080888900000000000333434333334334cccccc7ccc6666cc00000000
00000000000000000000000000000000000000000000000000000000d6111210e299919081888180000000000334433334433343ccccccccc667776c00000000
00000000000000000000000000000000000000000000000000000000dd611110ee29999088188880000000000333443433443434cc7ccc7c6777777600000000
00000000000033300000000000003330000000000000000000000000d6111110e299999081888880000000000344444444444444cccccccc6777776600000000
00000000000313100000000000031310000000000000000000000000d0166600e09aaa0080899900000000000334444444444444ccccccccc666666c00000000
00000000003333300000000000333330000000000000000000000000000660000002200000011000000000000334444444444444ccc7cccccccccccc00000000
006600066633a990006600066633a990000000000000000000000000000000000000000000000000000000000033444444444444cccccccccccccccc00000000
006676666633aa99006676666633aa990000000000000000000000000000000000000000000000000000000033344444cccccccccccccccccccccccc00000000
007766666566000000776666656600000000000000000000000000000000000000000000000000000000000033433444cccccccccc7cc7cccccccccc00000000
000665665560000000066566556000000000000000000000000000000000000000000000000000000000000033444444ccccc777cc7cc7cccccccccc00000000
000665556660000000066555666000000000000000000000000000000000000000000000000000000000000034444444cc77cccccc7cc7cccccccccc00000000
000066666600000000006666660000000000000000000000000000000000000000000000000000000000000033444444cccccccccc7cc7cccccccccc00000000
000009990000000000009909900000000000000000000000000000000000000000000000000000000000000033334444cccc777cccc7c7cccccccccc00000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000033444444c777ccccccc7c7cccccccccc00000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000034444444cccccccccccccccccccccccc00000000
00000000900000000000000090000000000000009000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000009a900000000000009a900000000000009a900000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000aaa0000000000000aaa0000000000000aaa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000131000000000000013100000000000001310000000000000000000000000000000000000000000aa00000000000000aa0000000000000000000000000
00000003330000000000000333000000000000033300000000000000000000000000000000000000000313900000000000031390000000000000000000000000
00000003630000000000000363000000000000036300000000000000000000000000000000000000003331000000000000333100000000000000000000000000
00000006660000000000000666000000000000066600000000000000000000000000000000000000666333000000000066633300000000000000000000000000
00000066666000000000006666600000000000666660000000000000000000000000000000000065666630000000006566663000000000000000000000000000
00000656665600000000065666560000000006566656000000000000000000000000000000000655666600000000065566660000000000000000000000000000
00000656665600000000065666560000000006566656000000000000000000000000000000006556665600000000655666560000000000000000000000000000
00000656665600000000065666560000000006566656000000000000000000000000000000006666656000000000666665600000000000000000000000000000
00000665656600000000066565660000000006656566000000000000000000000000000000006766556000000000676655600000000000000000000000000000
00000976667900000000097666700000000000766679000000000000000000000000000000006766566000000000676656600000000000000000000000000000
00000067776000000000096777600000000000677769000000000000000000000000000000000677799000000000067779000000000000000000000000000000
00000006660000000000000666000000000000066600000000000000000000000000000000000066600000000000006660000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
cccccccccccccccccccccccc000000000000000000000000000000000000000000000000000000003bb33b3b3bb33b3b00000000000000000000000000000000
cccccccccccccccccccccccc00000000000000000000000000000000006666000000000000000000b33333b3b33333b300000000000000000000000000000000
cccccccccccccccccccccccc00000000000000000000000000000000066777600000000000000000354345353bb33b3b00000000000000000000000000000000
ccccc667ccc776ccc67666cc00000000000000000000000000000000677777760000000000000000445444443b33bb3300000000000000000000000000000000
cccccccccccccccccccccccc00000000000000000000000000000000677777660000000000000000444454453333b33b00000000000000000000000000000000
667cccccc67766ccc666777c00000000000000000000000000000000066666600000000000000000454444443bb3333300000000000000000000000000000000
cccccccccccccccccccccccc0000000000000000000000000000000000000000000000000000000044454544333b3b3300000000000000000000000000000000
cccccccccccccccccccccccc00000000000000000000000000000000000000000000000000000000454444453b33333b00000000000000000000000000000000
cccccccccccccccc00000000000000000000000000000000000000000000000000000000000000003bb33b3b3bb33b3bcc673b3b000000000000000000000000
cccccccccccccccc0000000000000000000000000000000000000000000000000000000000000000b33333b3b33333b3c16733b3000000000000000000000000
ccccc611cc1116cc0000000000000000000000000000000000000000000000000000000000000000354345353543453516734535000000000000000000000000
cccccccccccccccc0000000000000000000000000000000000000000000000000000000000000000745444474454444416744444000000000000000000000000
cccccccccccccccc0000000000000000000000000000000000000000000000000000000000000000674454767444777416745444000000000000000000000000
cccc11ccccccc11c0000000000000000000000000000000000000000000000000000000000000000167777617777666716744444000000000000000000000000
61cccccccc61cccc0000000000000000000000000000000000000000000000000000000000000000c166661c66661116c1744444000000000000000000000000
cccccccccccccccc0000000000000000000000000000000000000000000000000000000000000000cc1111cc1111ccc1c1674444000000000000000000000000
cccccccccccccccccccccccccccccccccccccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
ccc777ccccc777ccccc7cccccccccccccccccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
cc7ccc7ccc7ccccccc7ccccccccccccccccccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
cc7ccc7ccc7ccccccccccccccccccccccccccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
cc7ccc7ccc7ccc7ccccccc7ccccccc7ccccccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
ccc777ccccccc7ccccccc7ccccccc7cccccccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
cccccccccccccccccccccccccccccccccccccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
cccccccccccccccccccccccccccccccccccccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e1e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
