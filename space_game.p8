pico-8 cartridge // http://www.pico-8.com
version 42
__lua__

-- game 

function _init()
	player_init()
	asteroid_init()
	bullet_init()
end

function _update()
	player_update()
	asteroid_creation()
	asteroid_update()
	bullet_update()
	
		
		
end

function _draw()
	cls()
	map()
	player_draw()
	asteroid_draw()
	bullet_draw()
	
end
-->8
-- player --
function player_init()
	
	plr={
		x=65,
		y=65,
		sprite=0,
		health=100,
		speed=1,
		fx=false,
		fy=false
	}
end

function player_update()
	move(plr)
	
	if btn(❎) then
			shoot(plr)
	end
	
end

function player_draw()
	player_cam(plr)

	spr(plr.sprite,plr.x,plr.y,1,1,plr.fx,plr.fy)
end
-->8
-- movement --

function move(plr)

	if btn(⬆️) then
		plr.y-=plr.speed
		plr.fx=false
		plr.fy=false

	end
	
	if btn(⬇️) then
		plr.y+=plr.speed
		plr.fx=false
		plr.fy=true
	end
	
	if btn(⬅️) then 
		plr.x-=plr.speed
		plr.fx=true
		plr.fy=false
		plr.sprite=1
	end
	
	if btn(➡️) then
		plr.x+=plr.speed
		plr.fx=false
		plr.fy=false
		plr.sprite=1
	end
	
end
-->8
-- camera --
function player_cam(plr)
	cx=plr.x+8-65
	cy=plr.y+8-65
	
	camera(cx,cy)
end
-->8
-- asteroids generation --

function asteroid_init()
	asteroids={}
	creation_time=0
end

function asteroid_update()
	
	for asteroid in all(asteroids)
		do
		
		asteroid.y+=asteroid.speed
		
			if asteroid.y > 100
				then
				del(asteroids,asteroid)
			end
	
	end
	
end

function asteroid_draw()

	for asteroid in all(asteroids)
		do
		spr(asteroid.spd,asteroid.x,asteroid.y)
	end
	
end

function asteroid_creation()

	creation_time+=1
	
	-- delays creation
	if creation_time >= 15 then
	
		add(asteroids, {
		x=flr(rnd(65)),
		y=flr(rnd(65)), 
		spd=16,
		speed=1,
		health=100
		
	})
	
	creation_time=0

	end

end
-->8
-- bullets --

function bullet_init()
	bullets={}
end

function bullet_update()

	for b in all(bullets) do
		b.y-=b.speed
		
			if b.y >= (b.y + 40) then

				-- delete item from table
					del(bullets,b)
			end
				
	end
	
	
	
end

function bullet_draw()

	for b in all(bullets) do
		spr(b.sprite,b.x,b.y)
	
	end
	
end

function shoot(plr)

	 
			
				-- adds to bullets
				add(bullets,{	
				x=plr.x,
				y=plr.y,
				dmg=25,
				sprite=32,
				speed=3	
				})
			
			

end
-->8



__gfx__
00166100001110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
01666d1001ddd1100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
016ccd109d666dd10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1667cd21d66c7c660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
166c7d212667cc660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1666dd21926666610000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
016dd210012221100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
009d2900001110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00155100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
01555510000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
15555561000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
155555d1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
01556d10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0015d100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00088000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00088000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
3030303030303030303030303030303030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3000131313131313131313131313131300300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3000131100000025252525000000001300300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3000131100000025110000000000001300300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3000131111001125000000000000001300300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3000130000111125250000000000001300300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3000130011111100000000000000131300300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3000131313131313131313131313131313300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3030303030303030303030303030303030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
