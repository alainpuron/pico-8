pico-8 cartridge // http://www.pico-8.com
version 43
__lua__

function _init()
	plr_init()
end

function _update()
	plr_update()
end

function _draw()
	cls()
	map()
		plr_draw(plr)
		print(has_flag)
end
-->8
function plr_init()

	plr={
		x=0,
		y=0,
		w=8,  -- width
		h=8,		-- height
		speed = 1, -- speed
		sp = 1 -- sprite	
	}
	 
end

function plr_update()
	plr_move(plr)
	plr_hitbox(plr)
	
	
end

function plr_move(plr)
	
	local last_x = plr.x
	local last_y = plr.y
	
	
	if btn(⬆️) then
		plr.y -= plr.speed
	end
	
	if btn(⬇️) then
		plr.y += plr.speed
	end
	
	if btn(➡️) then
		plr.x += plr.speed
	end
	
	if btn(⬅️) then
		plr.x -= plr.speed
	end
	
	if not can_move() then
		plr.x = last_x
		plr.y = last_y
	end
	
end

function plr_hitbox(plr)
	
	
	left = plr.x
	right = plr.x + plr.w
	bottom = plr.y
	top = plr.y + plr.h
	
end

function can_move()

		return not
		
		 (
		  is_tile(0,left,bottom) or
		  is_tile(0,right,bottom) or
		  is_tile(0,left,top) or
		  is_tile(0,right,top)
		  
		 ) 
		 
end

function is_tile(tile_type,x,y)

		-- what spr is the tile 
		tile =	mget(flr(x),flr(y))
		
		-- tile has flag
		has_flag = fget(tile,tile_type)

		-- if true
		return has_flag

end

function plr_draw(plr)
	spr(plr.sp,plr.x,plr.y,1,1)
end
__gfx__
00000000888888880000000033333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000888888880000000033333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700888888880000000033333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000888888880000000033333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000888888880000000033333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700888888880000000033333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000888888880000000033333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000888888880000000033333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
